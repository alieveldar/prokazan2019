var loader="<img src='/admin/images/loader.gif' class='loader' />"; var loader2="<img src='/admin/images/loader2.gif' style='padding:10px 0;' />";
var OpenWin=0; var OpenTools=0; var Speed=500; var Blankw=600; var Blankh=350;  var Startw=600; var path=document.location; var Setis=0;

$(document).ready(function(){ 
	if ($.browser.msie && $.browser.version.substr(0,1)<7) { $('li').has('ul').mouseover(function(){ $(this).children('ul').show(); }).mouseout(function(){ $(this).children('ul').hide(); })}
	$('input[type=checkbox]:not(.selectItem)').tzCheckbox({labels:['да ','нет']});
	var ht=$("#datepick").val(); $("#datepick").datepicker(); $("#datepick").datepicker("option","dateFormat", "dd.mm.yy"); $("#datepick").val(ht);
	var ht1=$("#datepick1").val(); $("#datepick1").datepicker(); $("#datepick1").datepicker("option","dateFormat", "dd.mm.yy"); $("#datepick1").val(ht1);
	var ht2=$("#datepick2").val(); $("#datepick2").datepicker(); $("#datepick2").datepicker("option","dateFormat", "dd.mm.yy"); $("#datepick2").val(ht2);
	var hts=$("#datepicks").val(); $("#datepicks").datepicker({ dateFormat: 'dd.mm.yy', onSelect:function(dateText, inst){ document.location="?cat=adm_planesdate&id="+dateText; }}); $("#datepicks").val(hts);
	$('.selectItem').live('change', function(){ if($('.selectItem:checked').size()) { $('.MultiDel').show();} else { $('.MultiDel').hide(); }});
}); 

function LoginInput(){ var l=$('#login').val(); var p=$('#password').val(); if (l!='' && p!='') { return true; } return false; } 

function stanUpData() { $("#dataNow").html("<img src='/admin/images/loader.gif' style='width:12px; height:12px;'>"); var GET=parseGetParams(); var id=GET["id"]; var cat=GET['cat'].split('_'); link=cat[0]; lid=$("#lid").val(); JsHttpRequest.query('modules/lenta/autodata-JSReq.php',{'id':id,'link':link},function(result,errors){ if(result){ $("#dataNow").html("<span style='color:#080;'>"+result["newtime"]+"</span>"); }}, true); }

(function($){ $.fn.tzCheckbox=function(options){ options=$.extend({ labels : ['да ','нет'] },options); return this.each(function(){ var originalCheckBox=$(this), labels=[]; if(originalCheckBox.data('on')){ labels[0]=originalCheckBox.data('on'); labels[1]=originalCheckBox.data('off'); } else { labels=options.labels; } var checkBox=$('<span>',{ class: 'tzCheckBox '+(this.checked?'checked':''), html:'<span class="tzCBContent">'+labels[this.checked?0:1]+'</span><span class="tzCBPart"></span>' }); checkBox.insertAfter(originalCheckBox.hide()); checkBox.click(function(){ checkBox.toggleClass('checked'); var isChecked=checkBox.hasClass('checked'); originalCheckBox.attr('checked',isChecked); checkBox.find('.tzCBContent').html(labels[isChecked?0:1]); var id=originalCheckBox.attr("id"); UpdateCheckbox(id); }); originalCheckBox.bind('change',function(){ checkBox.click(); });});};})(jQuery); function ToggleBlock(id) { $(id).toggle("normal"); } function GO(tolink) { document.location=tolink; } 
function Qdelta(progress) { return (progress*progress); } function Fdelta(progress) { return Math.pow(progress, 1/2.5); } function findOffsetHeight(){ var e=document.getElementById("content"); var res=0; while((res==0) && e.parentNode){ e=e.parentNode; res=e.offsetHeight;}return res;}  function findOffsetWidth() { return (document.body.scrollWidth > document.body.offsetWidth)?document.body.scrollWidth:document.body.offsetWidth; } function ViewBlank(caption, text) { var Totalh=findOffsetHeight(); var Totalw=findOffsetWidth(); if (OpenWin==0) { OpenWin=1; var div=document.createElement('div'); div.setAttribute('id', 'inBlock'); div.className=('inBlock'); document.body.appendChild(div); div.innerHTML="<div class='OpenName'>"+caption+"</div><div class='OpenLink'><img id='CloseBtn' class='CloseBar0' src='/admin/images/icons/exit.png' title='Закрыть' onmouseover=\"this.className='CloseBar1';\" onmouseout=\"this.className='CloseBar0';\" onClick='CloseBlank();'></div><div class='C5'></div><div id='ContentBox'>"+text+"</div><div class='C'></div>"; if (document.documentElement.scrollTop==0) { var yoffset=document.body.scrollTop; } else { var yoffset=document.documentElement.scrollTop; } Nheight=div.clientHeight; Nwidth=div.clientWidth; div.style.marginLeft="-"+(Nwidth/2)+"px"; Nint=setInterval(GetNewOffset, 100);  document.getElementById('BoxCount').value=Nint; var elem=document.getElementById('BoxUp'); elem.style.display="block"; elem.style.width=Totalw+"px"; elem.style.height=Totalh+"px"; speed=300; start=new Date().getTime(); setTimeout(function(){ now=(new Date().getTime())-start; if (now<speed) { setElementOpacity("BoxUp", Qdelta(now/speed)/2);  setTimeout(arguments.callee, 10); } else { setElementOpacity("BoxUp", 0.5); }}, 10); speed2=300; start2=new Date().getTime(); setTimeout(function(){ now2=(new Date().getTime())-start2; if (now2<speed2) { setElementOpacity("inBlock", Qdelta(now/speed));  setTimeout(arguments.callee, 10); } else { setElementOpacity("inBlock", 1); }}, 10); }} function GetNewOffset(Nheight){	if (document.documentElement.scrollTop==0) { var yoffset=document.body.scrollTop; } else { var yoffset=document.documentElement.scrollTop; }  Nh=document.getElementById('inBlock').clientHeight; Nh=Nh/2; Tops=yoffset-Nh; document.getElementById('inBlock').style.marginTop=Tops+'px'; } function CloseBlank() { element=document.getElementById('inBlock'); if (element) { element.parentNode.removeChild(element); } Nint=document.getElementById('BoxCount').value; clearInterval(Nint); document.getElementById('BoxCount').value='0'; speed=300; start=new Date().getTime(); setTimeout(function(){ now=(new Date().getTime())-start; if (now<speed) { setElementOpacity("BoxUp", 0.5-Qdelta(now/speed)/2);  setTimeout(arguments.callee, 10); }else{ setElementOpacity("BoxUp", 0); document.getElementById('BoxUp').style.display='none'; OpenWin=0; }},10);} function setElementOpacity(sElemId, nOpacity) { var opacityProp=getOpacityProperty(); var elem=document.getElementById(sElemId); if (!elem || !opacityProp) { return false;}; if (opacityProp=="filter") { nOpacity *= 100; var oAlpha=elem.filters['DXImageTransform.Microsoft.alpha'] || elem.filters.alpha;  if (oAlpha) { oAlpha.opacity=nOpacity; } else { elem.style.filter += "progid:DXImageTransform.Microsoft.Alpha(opacity="+nOpacity+")";  } } else { elem.style[opacityProp]=nOpacity; }} function getOpacityProperty() { if (typeof document.body.style.opacity == 'string') { return 'opacity'; } else if (typeof document.body.style.MozOpacity == 'string') { return 'MozOpacity'; } else if (typeof document.body.style.KhtmlOpacity == 'string') { return 'KhtmlOpacity'; } else if (document.body.filters && navigator.appVersion.match(/MSIE ([\d.]+);/)[1]>=5.5) { return 'filter'; } return false; } 
function LinkBlank(caption, text, tolink) { text=text+"<div class='C25'></div><div class='LinkG' style='float:left; margin-right:5px;'><a href='javascript:void(0);' onclick='GO(\""+tolink+"\");'>    OK    </a></div><div class='LinkR'><a href='javascript:void(0);' onclick='CloseBlank();'>Отмена</a></div><div class='C10'></div>"; ViewBlank(caption, text); } 
function UpdateCheckbox(id) { if(!id) return; z=id.indexOf("-"); if (z!=-1) { var data=id.split("-"); chk=$("#"+id).attr("checked"); if(chk=="checked"){stat=1;}else{stat=0;} if (data[1]!="" && data[2]!="" && data[1]!=undefined && data[2]!=undefined) { $("#Msg2").html("Идет сохранение данных..."); $("#Msg2").removeClass(); $("#Msg2").addClass("SaveDiv"); JsHttpRequest.query('modules/adm/index-checkbox-JSReq.php',{'table':data[2], 'id':data[1], 'stat':stat},function(result,errors){ if(result){ /*s*/ $("#Msg2").html("Данные успешно сохранены"); $("#Msg2").removeClass(); $("#Msg2").addClass("SuccessDiv"); /*e*/ }},true); }}} 
function ShowSets(id) { $(".ShowSets").toggle(); Setis=Setis+1; if (Setis==2) { Setis=0; $("#ShowSets").html("Показать дополнительные настройки"); } else { $("#ShowSets").html("Скрыть дополнительные настройки"); }} function trim(str, charlist) { charlist=!charlist ? ' \\s\xA0' : charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g, '\$1'); var re=new RegExp('^[' + charlist + ']+|[' + charlist + ']+$', 'g'); return str.replace(re, ''); }
function parseGetParams() { var $_GET={}; var __GET=window.location.search.substring(1).split("&"); for(var i=0; i<__GET.length; i++) { var getVar=__GET[i].split("="); $_GET[getVar[0]]=typeof(getVar[1])=="undefined" ? "" : getVar[1]; }  return $_GET;  } 